#!/usr/bin/env ruby

require 'orchard'
require 'colorize'

begin
  Orchard::CLI::CLI.start( ARGV )

rescue Orchard::Exceptions::LoginAuthenticationFailure
  puts "Login credentials invalid.".red

rescue Orchard::Exceptions::AuthenticationFailure
  puts "Login credentials invalid.".red
  puts ""
  puts "You probably need to log out and log back in again:"
  puts "  $ orchard juice logout"
  puts "  $ orchard juice login"

rescue Orchard::Exceptions::AlreadyLoggedIn
  puts "You're already logged in."

rescue Orchard::Exceptions::AlreadyLoggedOut
  puts "You're already logged out."

rescue Psych::SyntaxError
  $stderr.puts "\n\tError during processing: #{$!.message}\n\n"

rescue Heroku::API::Errors::Forbidden
  puts "\nError: You don't have permission to access this Heroku resource".red

rescue Heroku::API::Errors::NotFound
  puts "\nError: Heroku resource not found".red

end
